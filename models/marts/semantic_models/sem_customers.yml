semantic_models:
- name: customers
  description: This model consolidates customer information with their order history,
    providing insights into customer behavior and value. It includes details such
    as the number of orders per customer, the dates of their first and most recent
    orders, and their total spending, known as lifetime value.
  model: ref('customers')
  defaults:
    agg_time_dimension: most_recent_order_date

  entities:
  - name: customer_id
    type: primary

  dimensions:
  - name: customer_name
    description: The name of the customer.
    type: categorical
  - name: first_order_date
    description: The date when the customer placed their first order.
    type: time
    type_params:
      time_granularity: day
  - name: most_recent_order_date
    description: The date when the customer placed their most recent order.
    type: time
    type_params:
      time_granularity: day
  - name: orders_per_customer
    type: categorical
    description: The number of orders placed by the customer, as a dimension.

  measures:
  - name: customer_lifetime_value
    description: The total monetary value of all orders placed by the customer.
    agg: sum
    create_metric: true
  - name: orders_per_customer
    description: The total number of orders placed by the customer.
    agg: sum
    create_metric: true
  - name: count_customer_id
    agg: count
    create_metric: true
